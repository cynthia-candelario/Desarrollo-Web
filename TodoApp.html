<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To-Do App</title>
  <style>
    /* ğŸ¨ VARIABLES DE TEMA CLARO */
    :root {
      --bg: #f4f4f4;
      --text: #333;
      --card: #fff;
      --accent: #007bff;
    }

    /* ğŸŒ™ VARIABLES PARA MODO OSCURO */
    [data-theme="dark"] {
      --bg: #121212;
      --text: #f4f4f4;
      --card: #1e1e1e;
      --accent: #90caf9;
    }

    /* ğŸ§± ESTILOS GENERALES */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }

    .container {
      max-width: 600px;
      margin: auto;
      padding: 2rem;
    }

    h1 {
      text-align: center;
    }

    /* ğŸ“¥ INPUT Y BOTÃ“N DE AÃ‘ADIR */
    .todo-input {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    input[type="text"] {
      flex: 1;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      padding: 0.5rem 1rem;
      background: var(--accent);
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }

    /* ğŸ“Š FILTROS Y BOTÃ“N DE MODO OSCURO */
    .filters, .theme-toggle {
      display: flex;
      justify-content: space-between;
      margin: 1rem 0;
    }

    /* ğŸ“‹ LISTA DE TAREAS */
    .todo-list {
      list-style: none;
      padding: 0;
    }

    .todo-item {
      background: var(--card);
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* âœ… ESTILO DE TAREA COMPLETADA */
    .todo-item.completed span {
      text-decoration: line-through;
      opacity: 0.6;
    }

    .todo-item input[type="checkbox"] {
      margin-right: 0.5rem;
    }

    .actions button {
      margin-left: 0.3rem;
    }
  </style>
</head>
<body data-theme="light"> <!-- Por defecto, tema claro -->
  <div class="container">
    <h1>To-Do App</h1>

    <!-- ğŸ”¹ Entrada de texto y botÃ³n para aÃ±adir -->
    <div class="todo-input">
      <input type="text" id="taskInput" placeholder="Escribe una tarea..." />
      <button onclick="addTask()">AÃ±adir</button>
    </div>

    <!-- ğŸ” Filtros de tareas y modo oscuro -->
    <div class="filters">
      <div>
        <button onclick="setFilter('all')">Todas</button>
        <button onclick="setFilter('pending')">Pendientes</button>
        <button onclick="setFilter('completed')">Completadas</button>
      </div>
      <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ— Modo</button>
    </div>

    <!-- ğŸ“ƒ Lista de tareas -->
    <ul class="todo-list" id="todoList"></ul>
  </div>

  <!-- ğŸ’» LÃ³gica JavaScript -->
  <script>
    // Array que contiene todas las tareas (se carga desde localStorage si existe)
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    // Filtro actual ("all", "completed", "pending")
    let filter = 'all';

    // ğŸ“¦ Guardar tareas en localStorage
    function saveTasks() {
      localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    // ğŸ” Mostrar las tareas en pantalla
    function renderTasks() {
      const list = document.getElementById("todoList");
      list.innerHTML = ""; // Limpiar lista antes de renderizar

      // Filtramos segÃºn el estado actual
      tasks
        .filter(task => {
          if (filter === 'all') return true;
          if (filter === 'completed') return task.completed;
          if (filter === 'pending') return !task.completed;
        })
        .forEach((task, index) => {
          // Crear un elemento <li> por cada tarea
          const li = document.createElement("li");
          li.className = "todo-item" + (task.completed ? " completed" : "");

          // Contenido HTML interno del elemento
          li.innerHTML = `
            <div>
              <input type="checkbox" ${task.completed ? "checked" : ""} onclick="toggleComplete(${index})" />
              <span>${task.text}</span>
            </div>
            <div class="actions">
              <button onclick="editTask(${index})">âœï¸</button>
              <button onclick="deleteTask(${index})">ğŸ—‘ï¸</button>
            </div>
          `;

          list.appendChild(li); // AÃ±adirlo al DOM
        });
    }

    // â• AÃ±adir nueva tarea
    function addTask() {
      const input = document.getElementById("taskInput");
      const text = input.value.trim();
      if (text) {
        tasks.push({ text, completed: false }); // AÃ±adir al array
        input.value = ""; // Limpiar input
        saveTasks();      // Guardar en localStorage
        renderTasks();    // Actualizar pantalla
      }
    }

    // ğŸ“ Editar una tarea
    function editTask(index) {
      const newText = prompt("Editar tarea:", tasks[index].text);
      if (newText !== null) {
        tasks[index].text = newText.trim();
        saveTasks();
        renderTasks();
      }
    }

    // âŒ Eliminar tarea
    function deleteTask(index) {
      if (confirm("Â¿Eliminar esta tarea?")) {
        tasks.splice(index, 1); // Eliminar del array
        saveTasks();
        renderTasks();
      }
    }

    // âœ”ï¸ Marcar como completada/incompleta
    function toggleComplete(index) {
      tasks[index].completed = !tasks[index].completed;
      saveTasks();
      renderTasks();
    }

    // ğŸšï¸ Cambiar filtro
    function setFilter(value) {
      filter = value;
      renderTasks();
    }

    // ğŸŒ— Cambiar entre modo claro y oscuro
    function toggleTheme() {
      const body = document.body;
      const theme = body.getAttribute("data-theme");
      const newTheme = theme === "light" ? "dark" : "light";
      body.setAttribute("data-theme", newTheme);
    }

    // â±ï¸ Renderizar tareas al cargar la pÃ¡gina
    renderTasks();
  </script>
</body>
</html>
